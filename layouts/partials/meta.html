{{/* Page Title */}}
<title itemprop="name">
  {{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}
</title>

{{/* Description */}}
{{ $description := "" }}
{{ if .Description }}
  {{ $description = .Description }}
{{ else if .Params.summary }}
  {{ $description = .Params.summary }}
{{ else if .Summary }}
  {{ $description = .Summary | plainify | truncate 160 }}
{{ else }}
  {{ $description = .Site.Params.description }}
{{ end }}
<meta name="description" content="{{ $description }}" />

{{/* Open Graph Meta Tags */}}
<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }}{{ end }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:locale" content="{{ .Language.Lang | default "en" }}" />
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}" />

{{/* Open Graph Image */}}
{{ $ogImage := "" }}
{{ $ogWidth := 1200 }}
{{ $ogHeight := 630 }}
{{ if .Params.featured_image }}
  {{ $ogImage = .Params.featured_image | absURL }}
{{ else if .Site.Params.og_image }}
  {{ $ogImage = .Site.Params.og_image | absURL }}
{{ else if .Site.Params.hero_image }}
  {{ $heroResource := resources.Get .Site.Params.hero_image }}
  {{ if $heroResource }}
    {{/* Create a properly sized OG image by cropping and resizing */}}
    {{ $ogResource := $heroResource.Fill (printf "%dx%d Center" $ogWidth $ogHeight) }}
    {{ $ogImage = $ogResource.RelPermalink | absURL }}
  {{ end }}
{{ end }}
{{ if $ogImage }}
<meta property="og:image" content="{{ $ogImage }}" />
<meta property="og:image:secure_url" content="{{ $ogImage }}" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="{{ $ogWidth }}" />
<meta property="og:image:height" content="{{ $ogHeight }}" />
<meta property="og:image:alt" content="{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }}{{ end }}" />
{{ end }}

{{/* Twitter Card Meta Tags */}}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }}{{ end }}" />
<meta name="twitter:description" content="{{ $description }}" />
{{ if $ogImage }}
<meta name="twitter:image" content="{{ $ogImage }}" />
<meta name="twitter:image:alt" content="{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }}{{ end }}" />
{{ end }}

{{/* Schema.org structured data */}}
<meta itemprop="name" content="{{ if .IsHome }}{{ .Site.Title }} - {{ .Site.Params.moto }}{{ else }}{{ .Title }}{{ end }}" />
<meta itemprop="description" content="{{ $description }}" />
{{ if $ogImage }}
<meta itemprop="image" content="{{ $ogImage }}" />
{{ end }}

{{/* Article specific meta tags */}}
{{ if not .IsHome }}
{{ if .PublishDate }}
<meta property="article:published_time" content="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}" />
{{ end }}
{{ if .Lastmod }}
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" />
{{ end }}
{{ with .Params.author }}
<meta property="article:author" content="{{ . }}" />
{{ end }}
{{ range .GetTerms "tags" }}
<meta property="article:tag" content="{{ .Name }}" />
{{ end }}
{{ end }}

{{/* Canonical URL */}}
<link rel="canonical" href="{{ .Permalink }}" />
